"use strict";(self.webpackChunkminetrax_github_io=self.webpackChunkminetrax_github_io||[]).push([[8423],{7884:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"web/backup","title":"Backup Site","description":"You can backup your minetrax site to prevent data loss. This will also be helpful if you want to move your site to another server or if you want to restore your site to a previous state.","source":"@site/docs/web/backup-feature.md","sourceDirName":"web","slug":"/web/backup","permalink":"/docs/web/backup","draft":false,"unlisted":false,"editUrl":"https://github.com/minetrax/minetrax.github.io/edit/main/docs/web/backup-feature.md","tags":[],"version":"current","sidebarPosition":100,"frontMatter":{"sidebar_position":100,"title":"Backup Site","id":"backup"},"sidebar":"tutorialSidebar","previous":{"title":"WebSocket Options","permalink":"/docs/web/websocket-options"},"next":{"title":".env Config File","permalink":"/docs/web/dot-env-file"}}');var o=t(4848),s=t(8453);const r={sidebar_position:100,title:"Backup Site",id:"backup"},a=void 0,c={},l=[{value:"Enable Backup",id:"enable-backup",level:2},{value:"Storing Backup in S3",id:"storing-backup-in-s3",level:2},{value:"Storing Backup in SFTP Server",id:"storing-backup-in-sftp-server",level:2}];function u(e){const n={admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"You can backup your minetrax site to prevent data loss. This will also be helpful if you want to move your site to another server or if you want to restore your site to a previous state."}),"\n",(0,o.jsx)(n.p,{children:"MineTrax backup feature will backup the following:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Database (Your MySQL database)"}),"\n",(0,o.jsxs)(n.li,{children:["Files (All files in the minetrax installation directory. Eg: ",(0,o.jsx)(n.code,{children:"/var/www/minetrax"}),")"]}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{title:"IMPORTANT",type:"success",children:(0,o.jsxs)(n.p,{children:["After changing any environment variable, make sure to run ",(0,o.jsx)(n.code,{children:"sh update.sh"})," to apply the changes."]})}),"\n",(0,o.jsx)(n.h2,{id:"enable-backup",children:"Enable Backup"}),"\n",(0,o.jsxs)(n.p,{children:["To enable backup, you need to set the ",(0,o.jsx)(n.code,{children:"BACKUP_ENABLED"})," environment variable to ",(0,o.jsx)(n.code,{children:"true"}),".\nYou can do this by editing the ",(0,o.jsx)(n.code,{children:".env"})," file."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",metastring:'title=".env"',children:'BACKUP_ENABLED=true\n\n# OTHER BACKUP CONFIGURATIONS\n# It is recommended to keep it as it is.\nBACKUP_APP_NAME="${APP_NAME}-backup" \n# Disk where backup should be stored. Available Options: local, sftp, s3-private\nBACKUP_DISK=local \n# If you want to encrypt the archieve with a password\nBACKUP_ARCHIVE_PASSWORD=null \n# If you want to email after backup is successful or failed. Only works if SMTP is configured.\nBACKUP_NOTIFICATION_EMAIL=youremail@gmail.com \n# Total size in MB that all combined backup should not exceed. If it exceeds, old backup will be deleted. Default to 5GB.\nBACKUP_QUOTA_IN_MB=5000\n'})}),"\n",(0,o.jsxs)(n.p,{children:["New backup will be created daily and will be stored in the ",(0,o.jsx)(n.code,{children:"storage/app/${APP_NAME}-backup"})," directory."]}),"\n",(0,o.jsx)(n.h2,{id:"storing-backup-in-s3",children:"Storing Backup in S3"}),"\n",(0,o.jsxs)(n.p,{children:["You can store your backup in S3. To do this, you need to set the ",(0,o.jsx)(n.code,{children:"BACKUP_DISK"})," environment variable to ",(0,o.jsx)(n.code,{children:"s3-private"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",metastring:'title=".env"',children:"BACKUP_DISK=s3-private\n"})}),"\n",(0,o.jsxs)(n.p,{children:["For this to work, you need create a S3 bucket and update the following environment variables in the ",(0,o.jsx)(n.code,{children:".env"})," file to match your S3 bucket details."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",metastring:'title=".env"',children:"# Your AWS Access Key (with S3 access)\nAWS_ACCESS_KEY_ID=your-aws-access-key\n# Your AWS Secret Key\nAWS_SECRET_ACCESS_KEY=your-aws-secret-key\n# Your S3 Bucket Region\nAWS_DEFAULT_REGION=your-bucket-region\n# Bucket name of S3 Public Bucket\nAWS_BUCKET=public-bucket-name\n# Bucket name of S3 Private Bucket\nAWS_PRIVATE_BUCKET=private-bucket-name\n# If you want to use path style endpoint. Default to false.\nAWS_USE_PATH_STYLE_ENDPOINT=false\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["You can set ",(0,o.jsx)(n.code,{children:"AWS_BUCKET"})," to anything dummy since it is not used for private backup. (Public bucket is used for storing of public files in base you want to use S3 for storing of public files like profile pictures, etc.)"]})}),"\n",(0,o.jsx)(n.h2,{id:"storing-backup-in-sftp-server",children:"Storing Backup in SFTP Server"}),"\n",(0,o.jsxs)(n.p,{children:["You can store your backup in a SFTP server. To do this, you need to set the ",(0,o.jsx)(n.code,{children:"BACKUP_DISK"})," environment variable to ",(0,o.jsx)(n.code,{children:"sftp"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",metastring:'title=".env"',children:"BACKUP_DISK=sftp\n"})}),"\n",(0,o.jsxs)(n.p,{children:["For this to work, you need to update the following environment variables in the ",(0,o.jsx)(n.code,{children:".env"})," file to match your SFTP server details."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",metastring:'title=".env"',children:"# IP or Hostname of the SFTP server\nSFTP_DISK_HOST=sftp.example.com\n# Username to login\nSFTP_DISK_USERNAME=root\n# Password\nSFTP_DISK_PASSWORD=password\n# SFTP Server Port\nSFTP_DISK_PORT=22\n"})})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var i=t(6540);const o={},s=i.createContext(o);function r(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);