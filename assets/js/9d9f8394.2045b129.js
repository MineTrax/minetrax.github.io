"use strict";(self.webpackChunkminetrax_github_io=self.webpackChunkminetrax_github_io||[]).push([[9013],{7309:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"troubleshooting","title":"Troubleshooting","description":"This document covers some known issues and the process to debug and fix them.","source":"@site/docs/troubleshooting.md","sourceDirName":".","slug":"/troubleshooting","permalink":"/docs/troubleshooting","draft":false,"unlisted":false,"editUrl":"https://github.com/minetrax/minetrax.github.io/edit/main/docs/troubleshooting.md","tags":[],"version":"current","sidebarPosition":150,"frontMatter":{"sidebar_position":150,"title":"Troubleshooting","id":"troubleshooting"},"sidebar":"tutorialSidebar","previous":{"title":"Upgrade Guide","permalink":"/docs/upgrade"},"next":{"title":"Optimization","permalink":"/docs/optimization"}}');var o=i(4848),s=i(8453);const t={sidebar_position:150,title:"Troubleshooting",id:"troubleshooting"},a=void 0,l={},d=[{value:"1. Player Avatar image not showing for Bedrock Edition Players.",id:"1-player-avatar-image-not-showing-for-bedrock-edition-players",level:3},{value:"2. laravel.log permission issue.",id:"2-laravellog-permission-issue",level:3},{value:"3. Player Stats are not getting tracked.",id:"3-player-stats-are-not-getting-tracked",level:3},{value:"4. Minetrax taking too much CPU and Memory.",id:"4-minetrax-taking-too-much-cpu-and-memory",level:3},{value:"5. Out of Memory Error while Building Frontend Assets.",id:"5-out-of-memory-error-while-building-frontend-assets",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"This document covers some known issues and the process to debug and fix them."}),"\n",(0,o.jsx)(n.h3,{id:"1-player-avatar-image-not-showing-for-bedrock-edition-players",children:"1. Player Avatar image not showing for Bedrock Edition Players."}),"\n",(0,o.jsxs)(n.p,{children:["If you see broken image for bedrock edition players, it is mostly due to a Nginx configuration which prevents accessing any URL with ",(0,o.jsx)(n.code,{children:"."})," in it."]}),"\n",(0,o.jsxs)(n.p,{children:["Open your Nginx configuration file for MineTrax (mostly ",(0,o.jsx)(n.code,{children:"/etc/nginx/sites-available/minetrax.conf"}),") and find for below line."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-nginx",metastring:'title="/etc/nginx/sites-available/minetrax.conf"',children:"...\r\n\r\nlocation ~ /\\.(?!well-known).* {\r\n   deny all;\r\n}\r\n\r\n...\n"})}),"\n",(0,o.jsx)(n.p,{children:"Delete the above block of 3 lines and then restart Nginx."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo systemctl restart nginx\n"})}),"\n",(0,o.jsx)(n.p,{children:"Check if the issue is fixed."}),"\n",(0,o.jsx)(n.h3,{id:"2-laravellog-permission-issue",children:"2. laravel.log permission issue."}),"\n",(0,o.jsx)(n.p,{children:"If you get some error like:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'Error in exception handler: The stream or file "/var/www/minetrax/app/storage/logs/laravel.log" could not be opened: failed to open stream: Permission denied in /var/www/minetrax/bootstrap/compiled.php:8423\n'})}),"\n",(0,o.jsx)(n.p,{children:"It is because of missing permission required to write logs.\r\nYou need to make sure the ownership of the files belongs to the user who is running web server (in most cases its www-data)."}),"\n",(0,o.jsxs)(n.p,{children:["You can simply run ",(0,o.jsx)(n.code,{children:"update.sh"})," and it will fix permissions"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"sh update.sh\n"})}),"\n",(0,o.jsx)(n.p,{children:"or manually, Give the permission by running below command."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"chmod -R 775 /var/www/minetrax/storage/* var/www/minetrax/bootstrap/cache\r\nchown -R $USER:www-data /var/www/minetrax\n"})}),"\n",(0,o.jsx)(n.h3,{id:"3-player-stats-are-not-getting-tracked",children:"3. Player Stats are not getting tracked."}),"\n",(0,o.jsx)(n.p,{children:"If player stats are not getting tracked, it is mostly due to queue workers not working properly."}),"\n",(0,o.jsx)(n.p,{children:"You can try fixing file permissions & then restarting queue workers.\r\nRun below command"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"sh update.sh\r\nsudo supervisorctl restart all\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.em,{children:"Ping us on discord if issue persists"})}),"\n",(0,o.jsx)(n.h3,{id:"4-minetrax-taking-too-much-cpu-and-memory",children:"4. Minetrax taking too much CPU and Memory."}),"\n",(0,o.jsx)(n.p,{children:"If your queue workers are not working properly, it can cause high CPU and Memory usage."}),"\n",(0,o.jsx)(n.p,{children:"Queue workers fails mostly due to permission issues. You can fix permission and then restart queue workers by running below command."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"sh update.sh\r\nsudo supervisorctl restart all\n"})}),"\n",(0,o.jsx)(n.p,{children:"After that it should be fixed. Not not then check logs in /var/www/minetrax/storage/logs/ for any errors."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.em,{children:"Feel free to ping us on discord"})}),"\n",(0,o.jsx)(n.h3,{id:"5-out-of-memory-error-while-building-frontend-assets",children:"5. Out of Memory Error while Building Frontend Assets."}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsx)(n.p,{children:"This happen only if you rebuilding frontend assets."})}),"\n",(0,o.jsxs)(n.p,{children:["Building frontend assets(",(0,o.jsx)(n.code,{children:"npm run prod"}),") is memory intensive task. If your server RAM where web is hosted is low (<2GB), the build process might get failed with message like ",(0,o.jsx)(n.code,{children:"Killed"})," or ",(0,o.jsx)(n.code,{children:"ERR_WORKER_OUT_OF_MEMORY"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"In such cases, you need to do two things."}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Increase node memory limit.\r\nRun this command"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'export NODE_OPTIONS="--max-old-space-size=8192"\n'})}),"\n",(0,o.jsxs)(n.p,{children:["This will increase node memory limit for your current session.\r\n",(0,o.jsx)(n.em,{children:"You will have to run above for every new SSH Terminal you open to build frontend."})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Add Swap space to your server if there is none already.\r\nFollow this tutorial to add Swap space: ",(0,o.jsx)(n.a,{href:"https://www.digitalocean.com/community/tutorials/how-to-add-swap-space-on-ubuntu-20-04",children:"https://www.digitalocean.com/community/tutorials/how-to-add-swap-space-on-ubuntu-20-04"})]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>a});var r=i(6540);const o={},s=r.createContext(o);function t(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);