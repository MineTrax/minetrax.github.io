"use strict";(self.webpackChunkminetrax_github_io=self.webpackChunkminetrax_github_io||[]).push([[494],{488:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>h});const a=JSON.parse('{"id":"installation/setup-web-manually","title":"Setup Web (Manually)","description":"You only need to follow either AutoInstaller or Manual, not both.","source":"@site/docs/installation/setup-web-manually.mdx","sourceDirName":"installation","slug":"/installation/setup-web-manually","permalink":"/docs/installation/setup-web-manually","draft":false,"unlisted":false,"editUrl":"https://github.com/minetrax/minetrax.github.io/edit/main/docs/installation/setup-web-manually.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Setup Web (Manually)","id":"setup-web-manually"},"sidebar":"tutorialSidebar","previous":{"title":"Setup Web (AutoInstaller)","permalink":"/docs/installation/setup-web-autoinstaller"},"next":{"title":"Setup Web (Docker)","permalink":"/docs/installation/setup-web-docker"}}');var s=r(4848),t=r(8453),i=r(1470),l=r(9365);const o={sidebar_position:2,title:"Setup Web (Manually)",id:"setup-web-manually"},d=void 0,c={},h=[{value:"Server Requirements",id:"server-requirements",level:2},{value:"Installing Dependencies",id:"installing-dependencies",level:2},{value:"PHP",id:"php",level:3},{value:"MySQL / MariaDB",id:"mysql--mariadb",level:3},{value:"Apache2 / Nginx",id:"apache2--nginx",level:3},{value:"Composer",id:"composer",level:3},{value:"NodeJS",id:"nodejs",level:3},{value:"Redis Server, Git, Sendmail &amp; Supervisor",id:"redis-server-git-sendmail--supervisor",level:3},{value:"Installation",id:"installation",level:2},{value:"Cloning the codes from Github",id:"cloning-the-codes-from-github",level:3},{value:"Setup the Database",id:"setup-the-database",level:3},{value:"Environment and Migration",id:"environment-and-migration",level:3},{value:"Fix permissions",id:"fix-permissions",level:3},{value:"Setup Queue Listeners",id:"setup-queue-listeners",level:3},{value:"Add the cron",id:"add-the-cron",level:4},{value:"Create queue worker:",id:"create-queue-worker",level:4},{value:"Default queue:",id:"default-queue",level:4},{value:"Long queue:",id:"long-queue",level:4},{value:"Start the supervisor workers:",id:"start-the-supervisor-workers",level:4},{value:"WebSocket setup (optional)",id:"websocket-setup-optional",level:3},{value:"Web Server Configuration",id:"web-server-configuration",level:3},{value:"Finalize",id:"finalize",level:3},{value:"What&#39;s Next?",id:"whats-next",level:3}];function u(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsx)(n.p,{children:"You only need to follow either AutoInstaller or Manual, not both."}),(0,s.jsxs)(n.p,{children:["If you want us to install minetrax for your servers or stuck in any step and need help, Feel free to join our ",(0,s.jsx)(n.a,{href:"https://discord.gg/Hzfj27k",children:(0,s.jsx)(n.strong,{children:"Discord group"})})," and ask in help section or ping ",(0,s.jsx)(n.code,{children:"Xinecraft#2139"}),". Its free. \xaf\\_(\u30c4)_/\xaf"]})]}),"\n",(0,s.jsx)(n.p,{children:"Manual Install give you flexibility to install MineTrax in more different distributions of Linux & options to choose between Apache2 or Nginx, MySQL or MariaDB, etc.\nAlso, you can install on your existing server or a new server."}),"\n",(0,s.jsx)(n.h2,{id:"server-requirements",children:"Server Requirements"}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["The installation steps given in this docs consider you using debian based OS eg: ",(0,s.jsx)(n.code,{children:"Ubuntu 20.04"}),". If your server is running any other OS then you might have to do slight adjustments as per need during the process. Feel free to contact us in ",(0,s.jsx)(n.a,{href:"https://discord.gg/Hzfj27k",children:"Discord"})," for any help."]})}),"\n",(0,s.jsx)(n.p,{children:"MineTrax is designed to run on your web server of choice. It is recommended to use a VPS or Dedicated Server as hosting and not any shared hosting."}),"\n",(0,s.jsx)(n.p,{children:"Web requires a VPS or Dedicated Server with atleast 2GB of RAM and 1 CPU. Ubuntu 20.04 is recommended."}),"\n",(0,s.jsx)(n.p,{children:"Software Dependencies:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"PHP 8.3+"}),"\n",(0,s.jsx)(n.li,{children:"MySQL 8+ or MariaDB 10.3+"}),"\n",(0,s.jsx)(n.li,{children:"Apache2 or Nginx"}),"\n",(0,s.jsx)(n.li,{children:"NodeJS 16+"}),"\n",(0,s.jsx)(n.li,{children:"Redis Server"}),"\n",(0,s.jsx)(n.li,{children:"Git"}),"\n",(0,s.jsx)(n.li,{children:"Composer"}),"\n",(0,s.jsx)(n.li,{children:"Supervisor"}),"\n",(0,s.jsx)(n.li,{children:"Sendmail"}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["It is recommended to start with a fresh server to follow along. A small Virtual Server with 1 vCPU should be fine to start with.\nCloud providers like ",(0,s.jsx)(n.a,{href:"https://m.do.co/c/aece040492d0",children:"DigitalOcean"})," & ",(0,s.jsx)(n.a,{href:"https://hetzner.cloud/?ref=UBpE7ZNeerEj",children:"Hetzner"})," give credit upto 100$ to get started for free."]})}),"\n",(0,s.jsx)(n.h2,{id:"installing-dependencies",children:"Installing Dependencies"}),"\n",(0,s.jsx)(n.p,{children:"Update operating system to make sure all existing packages are up to date:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt update && sudo apt upgrade -y\n"})}),"\n",(0,s.jsx)(n.h3,{id:"php",children:"PHP"}),"\n",(0,s.jsx)(n.p,{children:"First, install the prerequisites and PPA and update."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt install software-properties-common && sudo add-apt-repository ppa:ondrej/php -y\nsudo apt update\n"})}),"\n",(0,s.jsx)(n.p,{children:"Install PHP 8.4 and all required extensions."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt -y install curl php8.4 php8.4-{cli,gd,mysql,pdo,mbstring,tokenizer,bcmath,xml,fpm,curl,zip,intl,redis}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"mysql--mariadb",children:"MySQL / MariaDB"}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"Make sure to only install one. Either MySQL or MariaDB. If installing MariaDB, make sure its version is >10.2.7."})}),"\n",(0,s.jsxs)(i.A,{children:[(0,s.jsxs)(l.A,{value:"mysql",label:"MySQL",children:[(0,s.jsx)(n.p,{children:"To install MySQL run the below command in terminal."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt install mysql-server\n"})})]}),(0,s.jsxs)(l.A,{value:"mariadb",label:"MariaDB",children:[(0,s.jsx)(n.p,{children:"To install MariaDB run the below command in terminal."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt install mariadb-server\n"})})]})]}),"\n",(0,s.jsx)(n.h3,{id:"apache2--nginx",children:"Apache2 / Nginx"}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"Make sure to only install one. Either Nginx or Apache2."})}),"\n",(0,s.jsxs)(i.A,{groupId:"apache-nginx",children:[(0,s.jsxs)(l.A,{value:"apache",label:"Apache2",children:[(0,s.jsx)(n.p,{children:"Install Apache2 server and php extension for it."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt install apache2 libapache2-mod-php8.4\nsudo systemctl restart apache2\n"})})]}),(0,s.jsxs)(l.A,{value:"nginx",label:"Nginx",children:[(0,s.jsx)(n.p,{children:"Install Nginx server and php-fpm runner."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt install nginx php8.4-fpm\n"})})]})]}),"\n",(0,s.jsx)(n.h3,{id:"composer",children:"Composer"}),"\n",(0,s.jsx)(n.p,{children:"Composer is a tool for dependency management in PHP. It allows you to declare the libraries your project depends on and it will manage (install/update) them for you.\nYou'll need composer installed before continuing in this process."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl -sS https://getcomposer.org/installer | sudo php -- --install-dir=/usr/local/bin --filename=composer\n"})}),"\n",(0,s.jsx)(n.h3,{id:"nodejs",children:"NodeJS"}),"\n",(0,s.jsx)(n.p,{children:"Add the Node PPA and update (here we are installing version 16, you can change if you want)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl -sL https://deb.nodesource.com/setup_16.x -o /tmp/nodesource_setup.sh\nsudo bash /tmp/nodesource_setup.sh\n"})}),"\n",(0,s.jsx)(n.p,{children:"Install NodeJS from APT"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt install nodejs\n"})}),"\n",(0,s.jsx)(n.h3,{id:"redis-server-git-sendmail--supervisor",children:"Redis Server, Git, Sendmail & Supervisor"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt install redis-server git supervisor sendmail unzip\nsudo systemctl enable --now redis-server\n"})}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.h3,{id:"cloning-the-codes-from-github",children:"Cloning the codes from Github"}),"\n",(0,s.jsx)(n.p,{children:"Create a folder where the web will live and move to that folder."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mkdir -p /var/www/minetrax\ncd /var/www/minetrax\n"})}),"\n",(0,s.jsx)(n.p,{children:"Now clone the MineTrax git repo to the newly created folder and fix permissions."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/MineTrax/minetrax.git .\nsudo chmod -R 775 storage/* bootstrap/cache/\n"})}),"\n",(0,s.jsx)(n.h3,{id:"setup-the-database",children:"Setup the Database"}),"\n",(0,s.jsx)(n.p,{children:"You need to create a MySQL/MariaDB database and a user with all permission to that database."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"// If below command ask for password just press enter. If not work then try sudo mysql\nmysql -u root -p\n\n// Create the database\nCREATE DATABASE minetrax;\n// Create the user, change 'randomStrongPassword' to any strong password of your choice.\nCREATE USER 'minetrax'@'localhost' IDENTIFIED BY 'randomStrongPassword';\n// Give permission of the DB to user\nGRANT ALL PRIVILEGES ON minetrax.* TO 'minetrax'@'localhost' WITH GRANT OPTION;\nexit\n"})}),"\n",(0,s.jsx)(n.h3,{id:"environment-and-migration",children:"Environment and Migration"}),"\n",(0,s.jsxs)(n.p,{children:["Now that the database is up we need to go back to the minetrax folder and copy ",(0,s.jsx)(n.code,{children:".env.example"})," file to ",(0,s.jsx)(n.code,{children:".env"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd /var/www/minetrax\ncp .env.example .env\n"})}),"\n",(0,s.jsx)(n.p,{children:"Install the composer dependencies."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"composer install\n"})}),"\n",(0,s.jsx)(n.p,{children:"Now generate a new key using."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Only run the if you are doing fresh install and don't have data in the database.\nphp artisan key:generate --force\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Next, change the database related variables in the ",(0,s.jsx)(n.code,{children:".env"})," file to match your database user credentials"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title=".env"',children:"APP_URL=http://your_domain.com # Change this to the URL which you wanna setup minetrax on.\n\nDB_CONNECTION=mysql\nDB_HOST=127.0.0.1\nDB_PORT=3306\nDB_DATABASE=minetrax\nDB_USERNAME=minetrax\nDB_PASSWORD=randomStrongPassword\n"})}),"\n",(0,s.jsx)(n.p,{children:"Migration and Seed the database, run the below command in terminal:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"php artisan migrate --seed\n"})}),"\n",(0,s.jsx)(n.p,{children:"Create symlink for storage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"php artisan storage:link\n"})}),"\n",(0,s.jsxs)(n.admonition,{title:"IMPORTANT",type:"danger",children:[(0,s.jsxs)(n.p,{children:["It is highly recommended to copy ",(0,s.jsx)(n.code,{children:".env"})," file and backup it somewhere safe. It contain very important information like ",(0,s.jsx)(n.code,{children:"APP_KEY"})," which is used to encrypt critical data before storing in database (eg: api keys and server credentials).\nWithout that key recovering data won't be possible."]}),(0,s.jsx)(n.p,{children:"Also, always keep that key secret."})]}),"\n",(0,s.jsx)(n.h3,{id:"fix-permissions",children:"Fix permissions"}),"\n",(0,s.jsx)(n.p,{children:"Fix permissions for the web folder so webserver can access the files."}),"\n",(0,s.jsxs)(i.A,{groupId:"apache-nginx",children:[(0,s.jsx)(l.A,{value:"apache",label:"Apache2",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# If using Apache (not on CentOS):\nchown -R $USER:www-data /var/www/minetrax/*\n\n# or, If using Apache on CentOS\nchown -R $USER:apache /var/www/minetrax/*\n"})})}),(0,s.jsx)(l.A,{value:"nginx",label:"Nginx",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# If using NGINX (not on CentOS):\nchown -R $USER:www-data /var/www/minetrax/*\n\n# or, If using NGINX on CentOS:\nchown -R $USER:nginx /var/www/minetrax/*\n"})})})]}),"\n",(0,s.jsx)(n.h3,{id:"setup-queue-listeners",children:"Setup Queue Listeners"}),"\n",(0,s.jsx)(n.p,{children:"Queue are used to run long running task like sending email, clearing stale data and importing data from servers. Queue workers in need to setup for these tasks to run."}),"\n",(0,s.jsx)(n.h4,{id:"add-the-cron",children:"Add the cron"}),"\n",(0,s.jsxs)(n.p,{children:["Firstly, need to add the scheduler runner command to cron.\nOpen crontab ",(0,s.jsx)(n.code,{children:"sudo crontab -e"})," and add then following in a new line there."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"* * * * * php /var/www/minetrax/artisan schedule:run >> /dev/null 2>&1\n"})}),"\n",(0,s.jsx)(n.h4,{id:"create-queue-worker",children:"Create queue worker:"}),"\n",(0,s.jsx)(n.p,{children:"We use supervisor for running of queue worker so incase they crash supervisor will automatically restart them."}),"\n",(0,s.jsxs)(n.p,{children:["Configuration file for supervisor are stored in folder ",(0,s.jsx)(n.code,{children:"/etc/supervisor/conf.d"}),". All supervisor conf file we create will be in there."]}),"\n",(0,s.jsx)(n.h4,{id:"default-queue",children:"Default queue:"}),"\n",(0,s.jsxs)(n.p,{children:["Create a new file called ",(0,s.jsx)(n.code,{children:"minetrax-worker-default.conf"})," and put below context in there."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title="/etc/supervisor/conf.d/minetrax-worker-default.conf"',children:"[program:minetrax-worker-default]\nprocess_name=%(program_name)s_%(process_num)02d\ncommand=php /var/www/minetrax/artisan queue:work --sleep=3 --tries=3 --max-time=3600\nautostart=true\nautorestart=true\nstopasgroup=true\nkillasgroup=true\nuser=www-data\nnumprocs=2\nredirect_stderr=true\nstopwaitsecs=3660\n"})}),"\n",(0,s.jsx)(n.h4,{id:"long-queue",children:"Long queue:"}),"\n",(0,s.jsxs)(n.p,{children:["Create a new file called ",(0,s.jsx)(n.code,{children:"minetrax-worker-long.conf"})," and put below context in there."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title="/etc/supervisor/conf.d/minetrax-worker-long.conf"',children:"[program:minetrax-worker-long]\nprocess_name=%(program_name)s_%(process_num)02d\ncommand=php /var/www/minetrax/artisan queue:work --queue=longtask,default redis-longtask --timeout=0 --sleep=3 --tries=3 --max-jobs=500\nautostart=true\nautorestart=true\nstopasgroup=true\nkillasgroup=true\nuser=www-data\nnumprocs=2\nredirect_stderr=true\nstopwaitsecs=3660\n"})}),"\n",(0,s.jsx)(n.h4,{id:"start-the-supervisor-workers",children:"Start the supervisor workers:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"sudo supervisorctl reread\nsudo supervisorctl update\n\nsudo supervisorctl start minetrax-worker-default:*\nsudo supervisorctl start minetrax-worker-long:*\n"})}),"\n",(0,s.jsxs)(n.admonition,{title:"Restart the queue",type:"info",children:[(0,s.jsx)(n.p,{children:"Whenever any change is made to code, queue worker don't pick them up as they are long running. To make laravel queue restart we run:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"php artisan queue:restart\n"})})]}),"\n",(0,s.jsx)(n.h3,{id:"websocket-setup-optional",children:"WebSocket setup (optional)"}),"\n",(0,s.jsxs)(n.admonition,{title:"Recommendation",type:"info",children:[(0,s.jsx)(n.p,{children:"This step is optional but recommended. By default minetrax will use polling to fetch and reload data from server without reloading. (eg: every 5 seconds)."}),(0,s.jsx)(n.p,{children:"If you want your site to feel more responsive and instant or you have a large audience and want to reduce the load on your server then you should setup websocket."})]}),"\n",(0,s.jsxs)(n.p,{children:["In this step we are going to setup ",(0,s.jsx)(n.a,{href:"https://pusher.com",children:"Pusher"})," as our websocket server."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Go to ",(0,s.jsx)(n.a,{href:"https://pusher.com",children:"pusher.com"})," and create a account."]}),"\n",(0,s.jsx)(n.li,{children:'In dashboard select "Channels" and then click "Create app" option to create a new app.'}),"\n",(0,s.jsxs)(n.li,{children:["Name your app anything you like and choose a location closest to your server location. Choose ",(0,s.jsx)(n.code,{children:"Vue.js"})," in Frontend and ",(0,s.jsx)(n.code,{children:"Laravel"})," in Backend dropdowns."]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.code,{children:"Create App"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Now go to ",(0,s.jsx)(n.code,{children:"App Keys"})," section and note down the ",(0,s.jsx)(n.code,{children:"app_id"}),", ",(0,s.jsx)(n.code,{children:"key"}),", ",(0,s.jsx)(n.code,{children:"secret"})," and ",(0,s.jsx)(n.code,{children:"cluster"})," variables.\nEg:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'app_id = "1367909";\nkey = "4b48b850682acb371c34";\nsecret = "41cc8be68c0d57fea4f3";\ncluster = "ap2";\n'})}),"\n",(0,s.jsxs)(n.p,{children:["After this open your ",(0,s.jsx)(n.code,{children:".env"})," file and replace the pusher related credentials to match above."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title=".env"',children:"PUSHER_APP_ID=1367909\nPUSHER_APP_KEY=4b48b850682acb371c34\nPUSHER_APP_SECRET=41cc8be68c0d57fea4f3\nPUSHER_APP_CLUSTER=ap2\n"})}),"\n",(0,s.jsx)(n.p,{children:"Also change broadcast driver to pusher."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title=".env"',children:"BROADCAST_DRIVER=pusher\n"})}),"\n",(0,s.jsx)(n.p,{children:"Next, restart the queue workers:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"cd /var/www/minetrax\nphp artisan queue:restart\n"})}),"\n",(0,s.jsxs)(n.admonition,{title:"pusher alternatives",type:"tip",children:[(0,s.jsxs)(n.p,{children:["Pusher provide 200k messages per day in free tier, which is more than enough for most cases, but if you have a very large userbase that might not be enough. In that case please check ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"../web/websocket-options",children:"Websocket Options"})})," page to learn how to setup Pusher alternatives."]}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"It is recommended to go for alternatives only after giving Pusher a try and its limit runs out."})})]}),"\n",(0,s.jsx)(n.h3,{id:"web-server-configuration",children:"Web Server Configuration"}),"\n",(0,s.jsx)(n.p,{children:"Finally lets setup the web server to access the web.\nMake sure your domain name is pointing to the IP address of the VPS/Dedicated server in which we are setting up the web. To do that you need to create an A record for your domain to the webserver IP from your domain DNS Provider."}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"Follow either Nginx or Apache2 steps as per your installation."})}),"\n",(0,s.jsxs)(i.A,{groupId:"apache-nginx",children:[(0,s.jsxs)(l.A,{value:"apache",label:"Apache2",children:[(0,s.jsx)("b",{children:"Apache2 Setup"}),(0,s.jsxs)(n.p,{children:["First, Create a new file with any name(eg: ",(0,s.jsx)(n.code,{children:"minetrax.conf"}),") in the Apache2 sites directory ",(0,s.jsx)(n.code,{children:"/etc/apache2/sites-available"})," with context provided below replacing highlighted section as per your installation."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo nano /etc/apache2/sites-available/minetrax.conf\n"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",metastring:'title="/etc/apache2/sites-available/minetrax.conf"',children:'<VirtualHost *:80>\n  // highlight-next-line\n  ServerName your_domain.com\n  // highlight-next-line\n  ServerAlias www.your_domain.com\n  DocumentRoot "/var/www/minetrax/public"\n\n  AllowEncodedSlashes On\n\n  <Directory "/var/www/minetrax/public">\n    AllowOverride all\n    Require all granted\n  </Directory>\n</VirtualHost>\n'})}),(0,s.jsx)(n.p,{children:"Next, enable rewrite mod & the site, and finally restart apache2 to reflect the changes."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"sudo a2enmod rewrite\nsudo a2ensite minetrax.conf\n\nsudo systemctl restart apache2\n"})}),(0,s.jsxs)(n.admonition,{type:"caution",children:[(0,s.jsxs)(n.p,{children:["You should disable default site ",(0,s.jsx)(n.code,{children:"/etc/apache2/sites-enabled/000-default.conf"}),"."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo a2dissite 000-default.conf\nsudo systemctl restart apache2\n"})})]})]}),(0,s.jsxs)(l.A,{value:"nginx",label:"Nginx",children:[(0,s.jsx)("b",{children:"Nginx Setup"}),(0,s.jsxs)(n.p,{children:["First, Create a new file with any name(eg: ",(0,s.jsx)(n.code,{children:"minetrax.conf"}),") in the Nginx sites directory ",(0,s.jsx)(n.code,{children:"/etc/nginx/sites-available"})," with context provided below replacing highlighted section as per your installation."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo nano /etc/nginx/sites-available/minetrax.conf\n"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",metastring:'title="/etc/nginx/sites-available/minetrax.conf"',children:'server {\n    listen 80;\n    listen [::]:80;\n    // highlight-next-line\n    server_name your_domain.com www.your_domain.com;\n    root /var/www/minetrax/public;\n\n    add_header X-Frame-Options "SAMEORIGIN";\n    add_header X-Content-Type-Options "nosniff";\n\n    index index.php;\n\n    charset utf-8;\n\n    location / {\n        try_files $uri $uri/ /index.php?$query_string;\n    }\n\n    location = /favicon.ico { access_log off; log_not_found off; }\n    location = /robots.txt  { access_log off; log_not_found off; }\n\n    error_page 404 /index.php;\n\n    location ~ \\.php$ {\n        fastcgi_pass unix:/var/run/php/php8.4-fpm.sock;\n        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;\n        include fastcgi_params;\n    }\n\n    location ~ /\\.(?!well-known).* {\n        deny all;\n    }\n}\n'})}),(0,s.jsxs)(n.p,{children:["Now create a symlink of the file created to ",(0,s.jsx)(n.code,{children:"sites-enabled"})," folder."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo ln -s /etc/nginx/sites-available/minetrax.conf /etc/nginx/sites-enabled/\n"})}),(0,s.jsx)(n.p,{children:"and finally reload your Nginx server to reflect the changes."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo systemctl reload nginx\n"})}),(0,s.jsxs)(n.admonition,{type:"caution",children:[(0,s.jsxs)(n.p,{children:["If this is a new VPS, you should disable default site ",(0,s.jsx)(n.code,{children:"/etc/nginx/sites-enabled/default"})," by removing it."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo rm /etc/nginx/sites-enabled/default\nsudo systemctl reload nginx\n"})})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"finalize",children:"Finalize"}),"\n",(0,s.jsxs)(n.p,{children:["Now minetrax should be up and running on your domain ",(0,s.jsx)(n.code,{children:"http://your_domain.com"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"A SuperAdmin user is created already for you, you can login and change the password:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Username: superadmin\nPassword: admin123\n"})}),"\n",(0,s.jsxs)(n.admonition,{title:"CHANGE PASSWORD & EMAIL",type:"danger",children:[(0,s.jsxs)(n.p,{children:["It is very important that you change the ",(0,s.jsx)(n.strong,{children:"password"})," & ",(0,s.jsx)(n.strong,{children:"email"})," of the ",(0,s.jsx)(n.code,{children:"superadmin"})," user after logging in."]}),(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.em,{children:["You can change password from ",(0,s.jsx)(n.code,{children:"Edit Profile"})," section and email from ",(0,s.jsx)(n.code,{children:"Admin > Users"})," section"]})})]}),"\n",(0,s.jsxs)(n.p,{children:["After checking your site is up and running, make sure to change ",(0,s.jsx)(n.code,{children:"APP_ENV=production"})," and ",(0,s.jsx)(n.code,{children:"APP_DEBUG=false"})," in the ",(0,s.jsx)(n.code,{children:".env"})," file."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title=".env"',children:'APP_NAME="YOUR_DESIRED_APP_NAME"\nAPP_ENV=production\nAPP_DEBUG=false\n'})}),"\n",(0,s.jsxs)(n.admonition,{title:"DISABLE DEBUG MODE",type:"danger",children:[(0,s.jsxs)(n.p,{children:["It is very important that you change your ",(0,s.jsx)(n.strong,{children:"APP_ENV"})," to ",(0,s.jsx)(n.code,{children:"production"})," and ",(0,s.jsx)(n.strong,{children:"APP_DEBUG"})," to ",(0,s.jsx)(n.code,{children:"false"})," in the ",(0,s.jsx)(n.code,{children:".env"})," file when you are done testing and setting up the site."]}),(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["Keeping APP_ENV to ",(0,s.jsx)(n.code,{children:"local"})," or APP_DEBUG to ",(0,s.jsx)(n.code,{children:"true"})," might expose sensitive information to end users."]})})]}),"\n",(0,s.jsx)(n.h3,{id:"whats-next",children:"What's Next?"}),"\n",(0,s.jsx)(n.p,{children:"Now you are all set to go, you can start using minetrax and add your servers to it.\nBelow are some steps to follow next:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"../installation/setup-web-ssl",children:"Secure your Web with SSL Certificate"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"../installation/adding-minecraft-server",children:"Add your First Minecraft Server to Web"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"../installation/setup-plugin",children:"Install Plugin on your Minecraft Server"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},9365:(e,n,r)=>{r.d(n,{A:()=>i});r(6540);var a=r(4164);const s={tabItem:"tabItem_Ymn6"};var t=r(4848);function i(e){let{children:n,hidden:r,className:i}=e;return(0,t.jsx)("div",{role:"tabpanel",className:(0,a.A)(s.tabItem,i),hidden:r,children:n})}},1470:(e,n,r)=>{r.d(n,{A:()=>y});var a=r(6540),s=r(4164),t=r(3104),i=r(6347),l=r(205),o=r(7485),d=r(1682),c=r(679);function h(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:r}=e;return(0,a.useMemo)((()=>{const e=n??function(e){return h(e).map((e=>{let{props:{value:n,label:r,attributes:a,default:s}}=e;return{value:n,label:r,attributes:a,default:s}}))}(r);return function(e){const n=(0,d.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,r])}function p(e){let{value:n,tabValues:r}=e;return r.some((e=>e.value===n))}function x(e){let{queryString:n=!1,groupId:r}=e;const s=(0,i.W6)(),t=function(e){let{queryString:n=!1,groupId:r}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:n,groupId:r});return[(0,o.aZ)(t),(0,a.useCallback)((e=>{if(!t)return;const n=new URLSearchParams(s.location.search);n.set(t,e),s.replace({...s.location,search:n.toString()})}),[t,s])]}function m(e){const{defaultValue:n,queryString:r=!1,groupId:s}=e,t=u(e),[i,o]=(0,a.useState)((()=>function(e){let{defaultValue:n,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=r.find((e=>e.default))??r[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:t}))),[d,h]=x({queryString:r,groupId:s}),[m,g]=function(e){let{groupId:n}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(n),[s,t]=(0,c.Dv)(r);return[s,(0,a.useCallback)((e=>{r&&t.set(e)}),[r,t])]}({groupId:s}),j=(()=>{const e=d??m;return p({value:e,tabValues:t})?e:null})();(0,l.A)((()=>{j&&o(j)}),[j]);return{selectedValue:i,selectValue:(0,a.useCallback)((e=>{if(!p({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);o(e),h(e),g(e)}),[h,g,t]),tabValues:t}}var g=r(2303);const j={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=r(4848);function v(e){let{className:n,block:r,selectedValue:a,selectValue:i,tabValues:l}=e;const o=[],{blockElementScrollPositionUntilNextRender:d}=(0,t.a_)(),c=e=>{const n=e.currentTarget,r=o.indexOf(n),s=l[r].value;s!==a&&(d(n),i(s))},h=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const r=o.indexOf(e.currentTarget)+1;n=o[r]??o[0];break}case"ArrowLeft":{const r=o.indexOf(e.currentTarget)-1;n=o[r]??o[o.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":r},n),children:l.map((e=>{let{value:n,label:r,attributes:t}=e;return(0,f.jsx)("li",{role:"tab",tabIndex:a===n?0:-1,"aria-selected":a===n,ref:e=>o.push(e),onKeyDown:h,onClick:c,...t,className:(0,s.A)("tabs__item",j.tabItem,t?.className,{"tabs__item--active":a===n}),children:r??n},n)}))})}function b(e){let{lazy:n,children:r,selectedValue:t}=e;const i=(Array.isArray(r)?r:[r]).filter(Boolean);if(n){const e=i.find((e=>e.props.value===t));return e?(0,a.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:i.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function w(e){const n=m(e);return(0,f.jsxs)("div",{className:(0,s.A)("tabs-container",j.tabList),children:[(0,f.jsx)(v,{...n,...e}),(0,f.jsx)(b,{...n,...e})]})}function y(e){const n=(0,g.A)();return(0,f.jsx)(w,{...e,children:h(e.children)},String(n))}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>l});var a=r(6540);const s={},t=a.createContext(s);function i(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);